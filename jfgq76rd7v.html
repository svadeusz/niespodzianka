<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Adi tu by≈Ç</title>
    <style>
        /* RESET I BLOKADA SCROLLA */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden; 
            background-color: #ffe4e1;
            font-family: 'Segoe UI', sans-serif;
        }

        /* --- WIDOK ODLICZANIA --- */
        #countdown-wrapper {
            display: flex;
            flex-direction: row;
            width: 100%;
            height: 100vh;
            background: radial-gradient(circle, #fff0f5 0%, #ffe4e1 100%);
        }

        .countdown-left {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
        }

        .countdown-right {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.03);
        }

        #status-text {
            color: #db7093;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        #timer {
            font-size: 5rem; /* Nieco mniejszy, by zmie≈õciƒá dni */
            font-weight: bold;
            color: #ff69b4;
            margin: 20px 0;
            text-shadow: 3px 3px 10px rgba(219, 112, 147, 0.3);
            line-height: 1.2;
        }

        .video-container-vertical {
            width: 350px;
            height: 80vh;
            box-shadow: 0 20px 50px rgba(219, 112, 147, 0.4);
            border-radius: 30px;
            overflow: hidden;
            border: 8px solid white;
            background: #000;
        }

        video { width: 100%; height: 100%; object-fit: cover; }

        /* --- WIDOK GRY --- */
        #game-content {
            display: none; 
            width: 100%;
            height: 100vh;
            justify-content: center;
            align-items: center;
            background-image: url('tlo4.png');
            background-size: cover;
            background-position: center;
        }

        .main-wrapper {
            display: flex;
            align-items: center;
            gap: 25px;
            transform: scale(0.85); 
            transition: opacity 0.5s;
        }

        .side-panel {
            width: 200px;
            background: rgba(255, 240, 245, 0.9);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(219, 112, 147, 0.3);
            border: 1px solid rgba(255, 182, 193, 0.5);
            backdrop-filter: blur(10px);
        }

        #container {
            position: relative;
            width: 643px; 
            height: 900px;
            border: 10px solid #f067ab;
            border-radius: 15px;
            background: #000;
            overflow: hidden;
        }

        #bingo-image { position: absolute; width: 100%; height: 100%; z-index: 1; }
        #scratch-canvas { position: absolute; top: 0; left: 0; z-index: 2; touch-action: none; }

        .tool-btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin-bottom: 12px;
            background: #ffb6c1;
            color: #4b0082;
            border: 2px solid #ff69b4;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .tool-btn.active { background: #db7093; color: white; }
        #back-from-wallpaper { position: fixed; top: 20px; right: 20px; width: 180px; z-index: 100; display: none; }
    </style>
</head>
<body>

    <div id="countdown-wrapper">
        <div class="countdown-left">
            <h1 id="status-text">Zaczynamy za:</h1>
            <div id="timer">≈Åadowanie...</div>
            <p style="color: #db7093; font-weight: bold;">Kliknij na wideo, aby w≈ÇƒÖczyƒá d≈∫wiƒôk!</p>
        </div>
        <div class="countdown-right">
            <div class="video-container-vertical">
                <video id="intro-video" autoplay muted loop playsinline controls>
                    <source src="videoplayback.mp4" type="video/mp4">
                </video>
            </div>
        </div>
    </div>

    <button id="back-from-wallpaper" class="tool-btn">üéØ Powr√≥t do gry</button>

    <div id="game-content">
        <div class="main-wrapper" id="game-ui">
            <div class="side-panel">
                <h3 style="color: #db7093; text-align: center;">Zasady</h3>
                <p>1. Ods≈Ço≈Ñ pola gƒÖbkƒÖ.</p>
                <p>2. Zaznaczaj pisakiem.</p>
                <p>3. Linia = <b>BINGO!</b></p>
            </div>

            <div id="container">
                <img src="plansza.png" id="bingo-image">
                <canvas id="scratch-canvas" width="643" height="900"></canvas>
            </div>

            <div class="side-panel">
                <h3 style="color: #db7093; text-align: center;">Narzƒôdzia</h3>
                <button class="tool-btn active" id="eraser-btn">üßΩ GƒÖbka</button>
                <button class="tool-btn" id="pen-btn">‚úèÔ∏è Pisak</button>
                <button class="tool-btn" id="view-wallpaper-btn">üñºÔ∏è Zobacz tapetƒô</button>
                <hr style="border: 1px solid #ffb6c1; margin: 15px 0;">
                <button class="tool-btn" onclick="location.reload()" id="reset-btn">üîÑ Reset</button>
            </div>
        </div>
    </div>

    <script>
        const video = document.getElementById("intro-video");
        video.volume = 0.7;
        document.body.addEventListener('click', () => { if(video.muted) video.muted = false; }, { once: true });

        // --- USTAWIENIE DATY ---
        const targetDate = new Date("Feb 14, 2026 18:00:00").getTime();

        const timerLoop = setInterval(function() {
            const now = new Date().getTime();
            const distance = targetDate - now;

            // Obliczanie Dni, Godzin, Minut i Sekund
            const d = Math.floor(distance / (1000 * 60 * 60 * 24));
            const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((distance % (1000 * 60)) / 1000);

            // Wy≈õwietlanie dni tylko je≈õli sƒÖ > 0
            let displayDays = d > 0 ? d + "d " : "";
            document.getElementById("timer").innerHTML = displayDays + h + "h " + m + "m " + s + "s";

            if (distance < 0) {
                clearInterval(timerLoop);
                video.pause();
                document.getElementById("countdown-wrapper").style.display = "none";
                document.getElementById("game-content").style.display = "flex";
                initBingo();
            }
        }, 1000);

        function initBingo() {
            const canvas = document.getElementById('scratch-canvas');
            const ctx = canvas.getContext('2d');
            const eraserBtn = document.getElementById('eraser-btn');
            const penBtn = document.getElementById('pen-btn');
            const viewBtn = document.getElementById('view-wallpaper-btn');
            const backBtn = document.getElementById('back-from-wallpaper');
            const gameUi = document.getElementById('game-ui');
            
            let isDrawing = false;
            let currentMode = 'eraser';

            const topImg = new Image();
            topImg.src = 'zdrapka.png';
            topImg.onload = () => ctx.drawImage(topImg, 0, 0, 643, 900);

            viewBtn.onclick = () => {
                gameUi.style.opacity = "0";
                setTimeout(() => { gameUi.style.display = "none"; backBtn.style.display = "block"; }, 500);
            };

            backBtn.onclick = () => {
                backBtn.style.display = "none";
                gameUi.style.display = "flex";
                setTimeout(() => { gameUi.style.opacity = "1"; }, 10);
            };

            eraserBtn.onclick = () => { currentMode = 'eraser'; eraserBtn.classList.add('active'); penBtn.classList.remove('active'); };
            penBtn.onclick = () => { currentMode = 'pen'; penBtn.classList.add('active'); eraserBtn.classList.remove('active'); };

            function draw(e) {
                if (!isDrawing) return;
                const rect = canvas.getBoundingClientRect();
                const scale = 0.85; 
                const x = ((e.clientX || e.touches[0].clientX) - rect.left) / scale;
                const y = ((e.clientY || e.touches[0].clientY) - rect.top) / scale;

                ctx.globalCompositeOperation = currentMode === 'eraser' ? 'destination-out' : 'source-over';
                if(currentMode === 'pen') {
                    ctx.strokeStyle = 'rgba(255, 20, 147, 0.6)';
                    ctx.lineWidth = 15; ctx.lineCap = 'round';
                    ctx.lineTo(x, y); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(x, y);
                } else {
                    ctx.beginPath(); ctx.arc(x, y, 30, 0, Math.PI * 2); ctx.fill();
                }
            }

            canvas.onmousedown = (e) => { isDrawing = true; draw(e); };
            window.onmouseup = () => { isDrawing = false; ctx.beginPath(); };
            canvas.onmousemove = draw;
            canvas.ontouchstart = (e) => { isDrawing = true; draw(e.touches[0]); e.preventDefault(); };
            canvas.ontouchmove = (e) => { draw(e.touches[0]); e.preventDefault(); };
            canvas.ontouchend = () => isDrawing = false;
        }
    </script>
</body>
</html>